"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[894,854],{4894:function(e,t,n){n.r(t),n.d(t,{default:function(){return j}});var r=n(2791),a=n(1413),c=n(4165),s=n(5861),i=n(1243),o=n(9434),u=n(1148),l=n(7888),d=n(854),m=n(1876),h=n(2271),f=n(184),x=function(e){var t=e.id,n=e.imageUrl,x=e.price,p=e.name,v=e.quantity,j=(0,o.v9)(l.Ri),y=(0,o.v9)(l.do),w=(0,o.v9)(m.i),b=(0,o.v9)(l.fq),g=(0,o.I0)(),k=(0,r.useCallback)(function(){var e=(0,s.Z)((0,c.Z)().mark((function e(t){var n,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.delete("http://localhost:8000/cart/".concat(t),{headers:{Authorization:"Bearer ".concat(w.token)}});case 3:n=e.sent,r=b.filter((function(e){return e.id!==n.data.id})),g((0,u.Nj)(r)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),g((0,u.L0)(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[b]),N=(0,r.useCallback)(function(){var e=(0,s.Z)((0,c.Z)().mark((function e(t){var n,r,s;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.map((function(e){return e.id===t?(0,a.Z)((0,a.Z)({},e),{},{quantity:e.quantity+1}):e})),r=n.find((function(e){return e.id===t})),e.prev=2,e.next=5,i.Z.put("http://localhost:8000/cart/".concat(r.id),{quantity:r.quantity},{headers:{Authorization:"Bearer ".concat(w.token)}});case 5:s=e.sent,g((0,u.vs)(s)),g((0,u.fq)(j+1)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),[b]),Z=(0,r.useCallback)(function(){var e=(0,s.Z)((0,c.Z)().mark((function e(t){var n,r,s;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.map((function(e){return e.id===t?(0,a.Z)((0,a.Z)({},e),{},{quantity:e.quantity-1}):e})),r=n.find((function(e){return e.id===t})),e.prev=2,e.next=5,i.Z.put("http://localhost:8000/cart/".concat(r.id),{quantity:r.quantity},{headers:{Authorization:"Bearer ".concat(w.token)}});case 5:s=e.sent,g((0,u.vs)(s)),g((0,u.fq)(j-1)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),g((0,u.L0)(e.t0));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),[b]);return(0,f.jsx)(f.Fragment,{children:y?(0,f.jsx)(d.default,{}):(0,f.jsxs)("div",{className:"relative flex flex-col md:flex-row justify-center items-center mt-10 border-2 uppercase font-mono font-bold text-xl p-5 tracking-wide",children:[(0,f.jsxs)("div",{className:"w-30%",children:[(0,f.jsx)("img",{className:"w-[200px] rounded-md hover:opacity-[.5] hover:cursor-pointer transition-opacity",src:n,alt:p}),(0,f.jsx)("p",{className:"text-center mt-5",children:p})]}),(0,f.jsxs)("div",{className:"w-full md:w-[20%] md:ml-10  flex justify-between items-center my-5",children:[(0,f.jsx)("div",{onClick:function(){return N(t)},className:" text-white hover:cursor-pointer w-[30px] h-[30px] rounded-[50%] bg-green-600 flex justify-center items-center",children:"+"}),(0,f.jsx)("p",{children:v}),(0,f.jsx)("div",{onClick:function(){return Z(t)},className:"text-white hover:cursor-pointer w-[30px] h-[30px] rounded-[50%] bg-red-600 flex justify-center items-center",children:"-"})]}),(0,f.jsxs)("p",{className:"mt-5 absolute top-[75%]",children:["$",x]}),(0,f.jsx)("div",{className:"mt-20 md:mt-0 md:ml-20",children:(0,f.jsxs)("button",{onClick:function(){return k(t)},className:"bg-black text-white p-2 w-[250px] md:w-[200px] rounded-sm hover:cursor-pointer hover:bg-white hover:text-black border-2 border-gray-400",children:[(0,f.jsx)(h.Z,{onClick:function(){return k(t)},className:"mr-2"}),"remove"]})})]})})},p=n(5764);var v=function(){var e=(0,o.v9)(m.i),t=(0,o.v9)(l._S),n=(0,p.useStripe)(),r=(0,p.useElements)(),a=function(){var a=(0,s.Z)((0,c.Z)().mark((function a(s){var i,o,u;return(0,c.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s.preventDefault(),n&&r){a.next=3;break}return a.abrupt("return");case 3:return a.next=5,fetch("http://localhost:8000/stripe/payment",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:100*t})}).then((function(e){return e.json()}));case 5:return i=a.sent,o=i.clientSecret,console.log(o),a.next=10,n.confirmCardPayment(o,{payment_method:{card:r.getElement(p.CardElement),billing_details:{name:e.user.userName}}});case 10:(u=a.sent).error?alert(u.error):"succeeded"===u.paymentIntent.status&&alert("payment successful \ud83d\ude03");case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return(0,f.jsx)("div",{className:"my-10",children:(0,f.jsxs)("form",{className:"mt-20 w-[500px] mx-auto",onSubmit:a,children:[(0,f.jsx)("h2",{className:"text-center my-5 text-[2rem] font-bold",children:"Credit-Card Payment"}),(0,f.jsx)(p.CardElement,{className:"w-[80%] mx-auto"}),(0,f.jsx)("button",{className:"bg-black w-1/2 text-white p-2 rounded-md mt-6 mx-auto block hover:bg-gray-700 hover:shadow-lg hover:text-white hover:scale-[0.95]",children:"Pay Now"})]})})},j=function(){var e=(0,o.v9)(l.fq),t=((0,o.v9)(m.i),(0,o.v9)(l._S)),n=(0,o.I0)();return(0,r.useEffect)((function(){var t=e.reduce((function(e,t){return Number(t.price)*t.quantity+e}),0);n((0,u.nQ)(t))}),[e]),(0,f.jsxs)(f.Fragment,{children:[e.length?(0,f.jsxs)("div",{className:"w-full md:w-[70%] mx-auto p-10 ",children:[(0,f.jsx)("h1",{className:"text-center uppercase font-mono text-xl md:text-4xl font-bold my-5",children:"Your Cart"}),e.map((function(e){var t=e.id,n=e.name,r=e.imageUrl,a=e.price,c=e.quantity;return(0,f.jsx)(x,{id:t,name:n,imageUrl:r,price:a,quantity:c},t)})),(0,f.jsxs)("div",{className:"flex justify-end ml-auto  uppercase text-2xl font-bold mt-20",children:["Your Sub Total : $",t]})]}):(0,f.jsx)("div",{className:"flex justify-center items-center h-screen uppercase font-sans text-4xl font-bold",children:"No item to show"}),(0,f.jsx)(v,{})]})}},854:function(e,t,n){n.r(t);var r=n(7047),a=n(1582),c=n(184);t.default=function(){return(0,c.jsx)("div",{className:"flex justify-center items-center h-screen ",children:(0,c.jsxs)(a.Z,{spacing:1,children:[(0,c.jsx)(r.Z,{variant:"text",sx:{fontSize:"1rem"}}),(0,c.jsx)(r.Z,{variant:"circular",width:40,height:40}),(0,c.jsx)(r.Z,{variant:"rectangular",width:210,height:60}),(0,c.jsx)(r.Z,{variant:"rounded",width:210,height:60})]})})}},2271:function(e,t,n){var r=n(4836);t.Z=void 0;var a=r(n(5649)),c=n(184),s=(0,a.default)((0,c.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline");t.Z=s}}]);
//# sourceMappingURL=894.3c541fff.chunk.js.map