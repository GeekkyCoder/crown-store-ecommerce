"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[894,854],{4894:function(e,t,r){r.r(t),r.d(t,{default:function(){return j}});var n=r(2791),a=r(1413),s=r(4165),c=r(5861),o=r(1243),i=r(9434),u=r(1148),l=r(7888),d=r(854),m=r(1876),p=r(2271),x=r(184),h=function(e){var t=e.id,r=e.imageUrl,h=e.price,f=e.name,v=e.quantity,b=(0,i.v9)(l.Ri),y=(0,i.v9)(l.do),j=(0,i.v9)(m.i),g=(0,i.v9)(l.fq),w=(0,i.I0)(),k=(0,n.useCallback)(function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var r,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.delete("/cart/".concat(t),{headers:{Authorization:"Bearer ".concat(j.token)}});case 3:r=e.sent,n=g.filter((function(e){return e.id!==r.data.id})),w((0,u.Nj)(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),w((0,u.L0)(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[g]),Z=(0,n.useCallback)(function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var r,n,c;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.map((function(e){return e.id===t?(0,a.Z)((0,a.Z)({},e),{},{quantity:e.quantity+1}):e})),n=r.find((function(e){return e.id===t})),e.prev=2,e.next=5,o.Z.put("/cart/".concat(n.id),{quantity:n.quantity},{headers:{Authorization:"Bearer ".concat(j.token)}});case 5:c=e.sent,w((0,u.vs)(c)),w((0,u.fq)(b+1)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),[g]),N=(0,n.useCallback)(function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var r,n,c;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.map((function(e){return e.id===t?(0,a.Z)((0,a.Z)({},e),{},{quantity:e.quantity-1}):e})),n=r.find((function(e){return e.id===t})),e.prev=2,e.next=5,o.Z.put("/cart/".concat(n.id),{quantity:n.quantity},{headers:{Authorization:"Bearer ".concat(j.token)}});case 5:c=e.sent,w((0,u.vs)(c)),w((0,u.fq)(b-1)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),w((0,u.L0)(e.t0));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),[g]);return(0,x.jsx)(x.Fragment,{children:y?(0,x.jsx)(d.default,{}):(0,x.jsxs)("div",{className:"relative flex flex-col md:flex-row justify-center items-center mt-10 border-2 uppercase font-mono font-bold text-xl p-5 tracking-wide",children:[(0,x.jsxs)("div",{className:"w-30%",children:[(0,x.jsx)("img",{className:"w-[200px] rounded-md hover:opacity-[.5] hover:cursor-pointer transition-opacity",src:r,alt:f}),(0,x.jsx)("p",{className:"text-center mt-5",children:f})]}),(0,x.jsxs)("div",{className:"w-full md:w-[20%] md:ml-10  flex justify-between items-center my-5",children:[(0,x.jsx)("div",{onClick:function(){return Z(t)},className:" text-white hover:cursor-pointer w-[30px] h-[30px] rounded-[50%] bg-green-600 flex justify-center items-center",children:"+"}),(0,x.jsx)("p",{children:v}),(0,x.jsx)("div",{onClick:function(){return N(t)},className:"text-white hover:cursor-pointer w-[30px] h-[30px] rounded-[50%] bg-red-600 flex justify-center items-center",children:"-"})]}),(0,x.jsxs)("p",{className:"mt-5 absolute top-[75%]",children:["$",h]}),(0,x.jsx)("div",{className:"mt-20 md:mt-0 md:ml-20",children:(0,x.jsxs)("button",{onClick:function(){return k(t)},className:"bg-black text-white p-2 w-[250px] md:w-[200px] rounded-sm hover:cursor-pointer hover:bg-white hover:text-black border-2 border-gray-400",children:[(0,x.jsx)(p.Z,{onClick:function(){return k(t)},className:"mr-2"}),"remove"]})})]})})},f=r(5764),v=r(5206),b=r(7689);var y=function(){var e=(0,i.v9)(m.i),t=(0,i.v9)(l._S),r=(0,i.I0)(),n=(0,b.s0)(),a=(0,f.useStripe)(),d=(0,f.useElements)(),p=function(){var i=(0,c.Z)((0,s.Z)().mark((function c(i){var l,m,p,x;return(0,s.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(i.preventDefault(),a&&d){s.next=3;break}return s.abrupt("return");case 3:return s.next=5,o.Z.post("/stripe/payment",{amount:100*t},{headers:{Authorization:"Bearer ".concat(e.token)}});case 5:return l=s.sent,m=l.data,p=m.clientSecret,s.next=10,a.confirmCardPayment(p,{payment_method:{card:d.getElement(f.CardElement),billing_details:{name:e.user.username}}});case 10:if(!(x=s.sent).error){s.next=16;break}x.error.code&&"incomplete_number"===x.error.code&&v.Am.error("incomplete_number",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}),x.error.type&&"validation_error"===x.error.type&&v.Am.error("All fields must be filled",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}),s.next=21;break;case 16:return"succeeded"===x.paymentIntent.status&&v.Am.success("payment successfull \u2714",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}),s.next=19,o.Z.get("/cart/removeAll",{headers:{Authorization:"Bearer ".concat(e.token)}});case 19:r((0,u.cZ)()),n("/");case 21:case"end":return s.stop()}}),c)})));return function(e){return i.apply(this,arguments)}}();return(0,x.jsx)("div",{className:"my-10 font-sans",children:(0,x.jsxs)("form",{className:"mt-20 w-[300px] md:w-[500px] mx-auto",onSubmit:p,children:[(0,x.jsx)("h2",{className:"text-center my-5 text-[1.4rem] md:text-[2rem] font-bold",children:"Credit-Card Payment"}),(0,x.jsxs)("p",{className:"font-semibold text-[18px] text-gray-700 font-mono",children:["Welcome"," ",e.user.username.charAt(0).toUpperCase()+e.user.username.slice(1),","," ",(0,x.jsx)("span",{className:"block my-2",children:"please do not provide your real bank details here"})," "]}),(0,x.jsx)("p",{className:"text-gray-700 my-4 text-center text-[18px] font-mono ",children:"Test: 4242 4242 4242 4242"}),(0,x.jsx)(f.CardElement,{className:"w-[80%] mx-auto mt-5"}),(0,x.jsx)("button",{className:"bg-black w-1/2 \r text-white p-2 rounded-md mt-6 mx-auto block hover:bg-gray-700 hover:shadow-lg hover:text-white hover:scale-[0.95]",children:"Pay Now"})]})})},j=function(){var e=(0,i.v9)(l.fq),t=((0,i.v9)(m.i),(0,i.v9)(l._S)),r=(0,i.I0)();return(0,n.useEffect)((function(){var t=e.reduce((function(e,t){return Number(t.price)*t.quantity+e}),0);r((0,u.nQ)(t))}),[e]),(0,x.jsxs)(x.Fragment,{children:[e.length?(0,x.jsxs)("div",{className:"w-full md:w-[70%] mx-auto p-10 ",children:[(0,x.jsx)("h1",{className:"text-center uppercase font-mono text-xl md:text-4xl font-bold my-5",children:"Your Cart"}),e.map((function(e){var t=e.id,r=e.name,n=e.imageUrl,a=e.price,s=e.quantity;return(0,x.jsx)(h,{id:t,name:r,imageUrl:n,price:a,quantity:s},t)})),(0,x.jsxs)("div",{className:"flex justify-end ml-auto  uppercase text-2xl font-bold mt-20",children:["Your Sub Total : $",t]})]}):(0,x.jsx)("div",{className:"flex justify-center items-center h-screen uppercase font-sans text-4xl font-bold",children:"No item to show"}),(0,x.jsx)(y,{})]})}},854:function(e,t,r){r.r(t);var n=r(7047),a=r(1582),s=r(184);t.default=function(){return(0,s.jsx)("div",{className:"flex justify-center items-center h-screen ",children:(0,s.jsxs)(a.Z,{spacing:1,children:[(0,s.jsx)(n.Z,{variant:"text",sx:{fontSize:"1rem"}}),(0,s.jsx)(n.Z,{variant:"circular",width:40,height:40}),(0,s.jsx)(n.Z,{variant:"rectangular",width:210,height:60}),(0,s.jsx)(n.Z,{variant:"rounded",width:210,height:60})]})})}},2271:function(e,t,r){var n=r(4836);t.Z=void 0;var a=n(r(5649)),s=r(184),c=(0,a.default)((0,s.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline");t.Z=c}}]);
//# sourceMappingURL=894.58dc75fd.chunk.js.map